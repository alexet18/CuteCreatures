{"ast":null,"code":"import { __decorate } from 'tslib';\nimport * as i4 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, ViewChild, Injector, Injectable, Optional, Directive, Inject, Input, NgModule } from '@angular/core';\nimport { Subject, fromEvent } from 'rxjs';\nimport { filter, take, takeUntil } from 'rxjs/operators';\nimport * as i1 from 'ng-zorro-antd/core/config';\nimport { WithConfig } from 'ng-zorro-antd/core/config';\nimport { isNotNil, InputBoolean } from 'ng-zorro-antd/core/util';\nimport * as i3 from '@angular/cdk/overlay';\nimport { OverlayRef, OverlayConfig, OverlayModule } from '@angular/cdk/overlay';\nimport { ComponentPortal, PortalModule } from '@angular/cdk/portal';\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport * as i5 from 'ng-zorro-antd/icon';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport * as i6 from '@angular/cdk/drag-drop';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport * as i3$1 from '@angular/cdk/bidi';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nconst _c0 = [\"imgRef\"];\n\nfunction NzImagePreviewComponent_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵlistener(\"click\", function NzImagePreviewComponent_li_5_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const option_r3 = restoredCtx.$implicit;\n      return option_r3.onClick();\n    });\n    i0.ɵɵelement(1, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"ant-image-preview-operations-operation-disabled\", ctx_r0.zoomOutDisabled && option_r3.type === \"zoomOut\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"nzType\", option_r3.icon);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_7_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 12, 13);\n  }\n\n  if (rf & 2) {\n    const image_r6 = i0.ɵɵnextContext().$implicit;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"width\", image_r6.width)(\"height\", image_r6.height)(\"transform\", ctx_r8.previewImageTransform);\n    i0.ɵɵattribute(\"src\", image_r6.src, i0.ɵɵsanitizeUrl)(\"srcset\", image_r6.srcset, i0.ɵɵsanitizeUrl)(\"alt\", image_r6.alt);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, NzImagePreviewComponent_ng_container_7_img_1_Template, 2, 9, \"img\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const imageIndex_r7 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.index === imageIndex_r7);\n  }\n}\n\nfunction NzImagePreviewComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.onSwitchLeft($event);\n    });\n    i0.ɵɵelement(2, \"span\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 16);\n    i0.ɵɵlistener(\"click\", function NzImagePreviewComponent_ng_container_8_Template_div_click_3_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onSwitchRight($event);\n    });\n    i0.ɵɵelement(4, \"span\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"ant-image-preview-switch-left-disabled\", ctx_r2.index <= 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"ant-image-preview-switch-right-disabled\", ctx_r2.index >= ctx_r2.images.length - 1);\n  }\n}\n\nconst _c1 = [\"*\"];\nconst FADE_CLASS_NAME_MAP = {\n  enter: 'ant-fade-enter',\n  enterActive: 'ant-fade-enter-active',\n  leave: 'ant-fade-leave',\n  leaveActive: 'ant-fade-leave-active'\n};\nconst IMAGE_PREVIEW_MASK_CLASS_NAME = 'ant-image-preview-mask';\nconst NZ_CONFIG_MODULE_NAME$1 = 'image';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nclass NzImagePreviewOptions {\n  constructor() {\n    this.nzKeyboard = true;\n    this.nzNoAnimation = false;\n    this.nzMaskClosable = true;\n    this.nzCloseOnNavigation = true;\n  }\n\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nclass NzImagePreviewRef {\n  constructor(previewInstance, config, overlayRef) {\n    this.previewInstance = previewInstance;\n    this.config = config;\n    this.overlayRef = overlayRef;\n    this.destroy$ = new Subject();\n    overlayRef.keydownEvents().pipe(filter(event => this.config.nzKeyboard && event.keyCode === ESCAPE && !hasModifierKey(event))).subscribe(event => {\n      event.preventDefault();\n      this.close();\n    });\n    overlayRef.detachments().subscribe(() => {\n      this.overlayRef.dispose();\n    });\n    previewInstance.containerClick.pipe(take(1), takeUntil(this.destroy$)).subscribe(() => {\n      this.close();\n    });\n    previewInstance.closeClick.pipe(take(1), takeUntil(this.destroy$)).subscribe(() => {\n      this.close();\n    });\n    previewInstance.animationStateChanged.pipe(filter(event => event.phaseName === 'done' && event.toState === 'leave'), take(1)).subscribe(() => {\n      this.dispose();\n    });\n  }\n\n  switchTo(index) {\n    this.previewInstance.switchTo(index);\n  }\n\n  next() {\n    this.previewInstance.next();\n  }\n\n  prev() {\n    this.previewInstance.prev();\n  }\n\n  close() {\n    this.previewInstance.startLeaveAnimation();\n  }\n\n  dispose() {\n    this.destroy$.next();\n    this.overlayRef.dispose();\n  }\n\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * fit content details: https://github.com/NG-ZORRO/ng-zorro-antd/pull/6154#issuecomment-745025554\n *\n * calc position x,y point\n *\n * CASE (width <= clientWidth && height <= clientHeight):\n *\n * ------------- clientWidth -------------\n * |                                     |\n * |        ------ width ------          |\n * |        |                 |          |\n * |        |                 |          |\n * client   height            |          |\n * Height   |                 |          |\n * |        |                 |          |\n * |        -------------------          |\n * |                                     |\n * |                                     |\n * ---------------------------------------\n * fixedPosition = { x: 0, y: 0 }\n *\n *\n *\n * CASE (width > clientWidth || height > clientHeight):\n *\n * ------------- clientWidth -------------\n * |        |                            |\n * |        top                          |\n * |        |                            |\n * |--left--|--------------- width -----------------\n * |        |                                      |\n * client   |                                      |\n * Height   |                                      |\n * |        |                                      |\n * |        |                                      |\n * |        height                                 |\n * |        |                                      |\n * ---------|                                      |\n *          |                                      |\n *          |                                      |\n *          |                                      |\n *          ----------------------------------------\n *\n *\n * - left || top > 0\n *   left -> 0 || top -> 0\n *\n * - (left + width) < clientWidth || (top + height) < clientHeight\n * - left | top + width | height < clientWidth | clientHeight -> Back left | top + width | height === clientWidth | clientHeight\n *\n * DEFAULT:\n * - hold position\n *\n */\n\n\nfunction getFitContentPosition(params) {\n  let fixPos = {};\n\n  if (params.width <= params.clientWidth && params.height <= params.clientHeight) {\n    fixPos = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  if (params.width > params.clientWidth || params.height > params.clientHeight) {\n    fixPos = {\n      x: fitPoint(params.left, params.width, params.clientWidth),\n      y: fitPoint(params.top, params.height, params.clientHeight)\n    };\n  }\n\n  return fixPos;\n}\n\nfunction getOffset(node) {\n  const box = node.getBoundingClientRect();\n  const docElem = document.documentElement; // use docElem.scrollLeft to support IE\n\n  return {\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n  };\n}\n\nfunction getClientSize() {\n  const width = document.documentElement.clientWidth;\n  const height = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    width,\n    height\n  };\n}\n\nfunction fitPoint(start, size, clientSize) {\n  const startAddSize = start + size;\n  const offsetStart = (size - clientSize) / 2;\n  let distance = null;\n\n  if (size > clientSize) {\n    if (start > 0) {\n      distance = offsetStart;\n    }\n\n    if (start < 0 && startAddSize < clientSize) {\n      distance = -offsetStart;\n    }\n  } else {\n    if (start < 0 || startAddSize > clientSize) {\n      distance = start < 0 ? offsetStart : -offsetStart;\n    }\n  }\n\n  return distance;\n}\n\nconst initialPosition = {\n  x: 0,\n  y: 0\n};\n\nclass NzImagePreviewComponent {\n  constructor(cdr, nzConfigService, config, overlayRef) {\n    var _a, _b;\n\n    this.cdr = cdr;\n    this.nzConfigService = nzConfigService;\n    this.config = config;\n    this.overlayRef = overlayRef;\n    this.images = [];\n    this.index = 0;\n    this.isDragging = false;\n    this.visible = true;\n    this.animationState = 'enter';\n    this.animationStateChanged = new EventEmitter();\n    this.previewImageTransform = '';\n    this.previewImageWrapperTransform = '';\n    this.operations = [{\n      icon: 'close',\n      onClick: () => {\n        this.onClose();\n      },\n      type: 'close'\n    }, {\n      icon: 'zoom-in',\n      onClick: () => {\n        this.onZoomIn();\n      },\n      type: 'zoomIn'\n    }, {\n      icon: 'zoom-out',\n      onClick: () => {\n        this.onZoomOut();\n      },\n      type: 'zoomOut'\n    }, {\n      icon: 'rotate-right',\n      onClick: () => {\n        this.onRotateRight();\n      },\n      type: 'rotateRight'\n    }, {\n      icon: 'rotate-left',\n      onClick: () => {\n        this.onRotateLeft();\n      },\n      type: 'rotateLeft'\n    }];\n    this.zoomOutDisabled = false;\n    this.position = Object.assign({}, initialPosition);\n    this.containerClick = new EventEmitter();\n    this.closeClick = new EventEmitter();\n    this.destroy$ = new Subject();\n    this.zoom = (_a = this.config.nzZoom) !== null && _a !== void 0 ? _a : 1;\n    this.rotate = (_b = this.config.nzRotate) !== null && _b !== void 0 ? _b : 0;\n    this.updateZoomOutDisabled();\n    this.updatePreviewImageTransform();\n    this.updatePreviewImageWrapperTransform();\n  }\n\n  get animationDisabled() {\n    var _a;\n\n    return (_a = this.config.nzNoAnimation) !== null && _a !== void 0 ? _a : false;\n  }\n\n  get maskClosable() {\n    var _a, _b;\n\n    const defaultConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME$1) || {};\n    return (_b = (_a = this.config.nzMaskClosable) !== null && _a !== void 0 ? _a : defaultConfig.nzMaskClosable) !== null && _b !== void 0 ? _b : true;\n  }\n\n  setImages(images) {\n    this.images = images;\n    this.cdr.markForCheck();\n  }\n\n  switchTo(index) {\n    this.index = index;\n    this.cdr.markForCheck();\n  }\n\n  next() {\n    if (this.index < this.images.length - 1) {\n      this.reset();\n      this.index++;\n      this.updatePreviewImageTransform();\n      this.updatePreviewImageWrapperTransform();\n      this.updateZoomOutDisabled();\n      this.cdr.markForCheck();\n    }\n  }\n\n  prev() {\n    if (this.index > 0) {\n      this.reset();\n      this.index--;\n      this.updatePreviewImageTransform();\n      this.updatePreviewImageWrapperTransform();\n      this.updateZoomOutDisabled();\n      this.cdr.markForCheck();\n    }\n  }\n\n  markForCheck() {\n    this.cdr.markForCheck();\n  }\n\n  onClose() {\n    this.closeClick.emit();\n  }\n\n  onZoomIn() {\n    this.zoom += 1;\n    this.updatePreviewImageTransform();\n    this.updateZoomOutDisabled();\n    this.position = Object.assign({}, initialPosition);\n  }\n\n  onZoomOut() {\n    if (this.zoom > 1) {\n      this.zoom -= 1;\n      this.updatePreviewImageTransform();\n      this.updateZoomOutDisabled();\n      this.position = Object.assign({}, initialPosition);\n    }\n  }\n\n  onRotateRight() {\n    this.rotate += 90;\n    this.updatePreviewImageTransform();\n  }\n\n  onRotateLeft() {\n    this.rotate -= 90;\n    this.updatePreviewImageTransform();\n  }\n\n  onSwitchLeft(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.prev();\n  }\n\n  onSwitchRight(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.next();\n  }\n\n  onContainerClick(e) {\n    if (e.target === e.currentTarget && this.maskClosable) {\n      this.containerClick.emit();\n    }\n  }\n\n  onAnimationStart(event) {\n    if (event.toState === 'enter') {\n      this.setEnterAnimationClass();\n    } else if (event.toState === 'leave') {\n      this.setLeaveAnimationClass();\n    }\n\n    this.animationStateChanged.emit(event);\n  }\n\n  onAnimationDone(event) {\n    if (event.toState === 'enter') {\n      this.setEnterAnimationClass();\n    } else if (event.toState === 'leave') {\n      this.setLeaveAnimationClass();\n    }\n\n    this.animationStateChanged.emit(event);\n  }\n\n  startLeaveAnimation() {\n    this.animationState = 'leave';\n    this.cdr.markForCheck();\n  }\n\n  onDragStarted() {\n    this.isDragging = true;\n  }\n\n  onDragReleased() {\n    this.isDragging = false;\n    const width = this.imageRef.nativeElement.offsetWidth * this.zoom;\n    const height = this.imageRef.nativeElement.offsetHeight * this.zoom;\n    const {\n      left,\n      top\n    } = getOffset(this.imageRef.nativeElement);\n    const {\n      width: clientWidth,\n      height: clientHeight\n    } = getClientSize();\n    const isRotate = this.rotate % 180 !== 0;\n    const fitContentParams = {\n      width: isRotate ? height : width,\n      height: isRotate ? width : height,\n      left,\n      top,\n      clientWidth,\n      clientHeight\n    };\n    const fitContentPos = getFitContentPosition(fitContentParams);\n\n    if (isNotNil(fitContentPos.x) || isNotNil(fitContentPos.y)) {\n      this.position = Object.assign(Object.assign({}, this.position), fitContentPos);\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  updatePreviewImageTransform() {\n    this.previewImageTransform = `scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`;\n  }\n\n  updatePreviewImageWrapperTransform() {\n    this.previewImageWrapperTransform = `translate3d(${this.position.x}px, ${this.position.y}px, 0)`;\n  }\n\n  updateZoomOutDisabled() {\n    this.zoomOutDisabled = this.zoom <= 1;\n  }\n\n  setEnterAnimationClass() {\n    if (this.animationDisabled) {\n      return;\n    }\n\n    const backdropElement = this.overlayRef.backdropElement;\n\n    if (backdropElement) {\n      backdropElement.classList.add(FADE_CLASS_NAME_MAP.enter);\n      backdropElement.classList.add(FADE_CLASS_NAME_MAP.enterActive);\n    }\n  }\n\n  setLeaveAnimationClass() {\n    if (this.animationDisabled) {\n      return;\n    }\n\n    const backdropElement = this.overlayRef.backdropElement;\n\n    if (backdropElement) {\n      backdropElement.classList.add(FADE_CLASS_NAME_MAP.leave);\n      backdropElement.classList.add(FADE_CLASS_NAME_MAP.leaveActive);\n    }\n  }\n\n  reset() {\n    this.zoom = 1;\n    this.rotate = 0;\n    this.position = Object.assign({}, initialPosition);\n  }\n\n}\n\nNzImagePreviewComponent.ɵfac = function NzImagePreviewComponent_Factory(t) {\n  return new (t || NzImagePreviewComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.NzConfigService), i0.ɵɵdirectiveInject(NzImagePreviewOptions), i0.ɵɵdirectiveInject(i3.OverlayRef));\n};\n\nNzImagePreviewComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NzImagePreviewComponent,\n  selectors: [[\"nz-image-preview\"]],\n  viewQuery: function NzImagePreviewComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imageRef = _t.first);\n    }\n  },\n  hostAttrs: [\"tabindex\", \"-1\", \"role\", \"document\", 1, \"ant-image-preview-wrap\"],\n  hostVars: 6,\n  hostBindings: function NzImagePreviewComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵsyntheticHostListener(\"@fadeMotion.start\", function NzImagePreviewComponent_animation_fadeMotion_start_HostBindingHandler($event) {\n        return ctx.onAnimationStart($event);\n      })(\"@fadeMotion.done\", function NzImagePreviewComponent_animation_fadeMotion_done_HostBindingHandler($event) {\n        return ctx.onAnimationDone($event);\n      });\n      i0.ɵɵlistener(\"click\", function NzImagePreviewComponent_click_HostBindingHandler($event) {\n        return ctx.onContainerClick($event);\n      });\n    }\n\n    if (rf & 2) {\n      i0.ɵɵsyntheticHostProperty(\"@.disabled\", ctx.config.nzNoAnimation)(\"@fadeMotion\", ctx.animationState);\n      i0.ɵɵstyleProp(\"z-index\", ctx.config.nzZIndex);\n      i0.ɵɵclassProp(\"ant-image-preview-moving\", ctx.isDragging);\n    }\n  },\n  exportAs: [\"nzImagePreview\"],\n  decls: 10,\n  vars: 6,\n  consts: [[1, \"ant-image-preview\"], [\"tabindex\", \"0\", \"aria-hidden\", \"true\", 2, \"width\", \"0\", \"height\", \"0\", \"overflow\", \"hidden\", \"outline\", \"none\"], [1, \"ant-image-preview-content\"], [1, \"ant-image-preview-body\"], [1, \"ant-image-preview-operations\"], [\"class\", \"ant-image-preview-operations-operation\", 3, \"ant-image-preview-operations-operation-disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", 1, \"ant-image-preview-img-wrapper\", 3, \"cdkDragFreeDragPosition\", \"mousedown\", \"cdkDragReleased\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"ant-image-preview-operations-operation\", 3, \"click\"], [\"nz-icon\", \"\", \"nzTheme\", \"outline\", 1, \"ant-image-preview-operations-icon\", 3, \"nzType\"], [\"cdkDragHandle\", \"\", \"class\", \"ant-image-preview-img\", 3, \"width\", \"height\", \"transform\", 4, \"ngIf\"], [\"cdkDragHandle\", \"\", 1, \"ant-image-preview-img\"], [\"imgRef\", \"\"], [1, \"ant-image-preview-switch-left\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"left\", \"nzTheme\", \"outline\"], [1, \"ant-image-preview-switch-right\", 3, \"click\"], [\"nz-icon\", \"\", \"nzType\", \"right\", \"nzTheme\", \"outline\"]],\n  template: function NzImagePreviewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"ul\", 4);\n      i0.ɵɵtemplate(5, NzImagePreviewComponent_li_5_Template, 2, 3, \"li\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 6);\n      i0.ɵɵlistener(\"mousedown\", function NzImagePreviewComponent_Template_div_mousedown_6_listener() {\n        return ctx.onDragStarted();\n      })(\"cdkDragReleased\", function NzImagePreviewComponent_Template_div_cdkDragReleased_6_listener() {\n        return ctx.onDragReleased();\n      });\n      i0.ɵɵtemplate(7, NzImagePreviewComponent_ng_container_7_Template, 2, 1, \"ng-container\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(8, NzImagePreviewComponent_ng_container_8_Template, 5, 4, \"ng-container\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.operations);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"transform\", ctx.previewImageWrapperTransform);\n      i0.ɵɵproperty(\"cdkDragFreeDragPosition\", ctx.position);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.images);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.images.length > 1);\n    }\n  },\n  directives: [i4.NgForOf, i5.NzIconDirective, i6.CdkDrag, i4.NgIf, i6.CdkDragHandle],\n  encapsulation: 2,\n  data: {\n    animation: [fadeMotion]\n  },\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NzImagePreviewComponent, [{\n    type: Component,\n    args: [{\n      selector: 'nz-image-preview',\n      exportAs: 'nzImagePreview',\n      animations: [fadeMotion],\n      template: `\n    <div class=\"ant-image-preview\">\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n      <div class=\"ant-image-preview-content\">\n        <div class=\"ant-image-preview-body\">\n          <ul class=\"ant-image-preview-operations\">\n            <li\n              class=\"ant-image-preview-operations-operation\"\n              [class.ant-image-preview-operations-operation-disabled]=\"zoomOutDisabled && option.type === 'zoomOut'\"\n              (click)=\"option.onClick()\"\n              *ngFor=\"let option of operations\"\n            >\n              <span class=\"ant-image-preview-operations-icon\" nz-icon [nzType]=\"option.icon\" nzTheme=\"outline\"></span>\n            </li>\n          </ul>\n          <div\n            class=\"ant-image-preview-img-wrapper\"\n            cdkDrag\n            [style.transform]=\"previewImageWrapperTransform\"\n            [cdkDragFreeDragPosition]=\"position\"\n            (mousedown)=\"onDragStarted()\"\n            (cdkDragReleased)=\"onDragReleased()\"\n          >\n            <ng-container *ngFor=\"let image of images; index as imageIndex\">\n              <img\n                cdkDragHandle\n                class=\"ant-image-preview-img\"\n                #imgRef\n                *ngIf=\"index === imageIndex\"\n                [attr.src]=\"image.src\"\n                [attr.srcset]=\"image.srcset\"\n                [attr.alt]=\"image.alt\"\n                [style.width]=\"image.width\"\n                [style.height]=\"image.height\"\n                [style.transform]=\"previewImageTransform\"\n              />\n            </ng-container>\n          </div>\n          <ng-container *ngIf=\"images.length > 1\">\n            <div\n              class=\"ant-image-preview-switch-left\"\n              [class.ant-image-preview-switch-left-disabled]=\"index <= 0\"\n              (click)=\"onSwitchLeft($event)\"\n            >\n              <span nz-icon nzType=\"left\" nzTheme=\"outline\"></span>\n            </div>\n            <div\n              class=\"ant-image-preview-switch-right\"\n              [class.ant-image-preview-switch-right-disabled]=\"index >= images.length - 1\"\n              (click)=\"onSwitchRight($event)\"\n            >\n              <span nz-icon nzType=\"right\" nzTheme=\"outline\"></span>\n            </div>\n          </ng-container>\n        </div>\n      </div>\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n    </div>\n  `,\n      preserveWhitespaces: false,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None,\n      host: {\n        class: 'ant-image-preview-wrap',\n        '[class.ant-image-preview-moving]': 'isDragging',\n        '[style.zIndex]': 'config.nzZIndex',\n        '[@.disabled]': 'config.nzNoAnimation',\n        '[@fadeMotion]': 'animationState',\n        '(@fadeMotion.start)': 'onAnimationStart($event)',\n        '(@fadeMotion.done)': 'onAnimationDone($event)',\n        '(click)': 'onContainerClick($event)',\n        tabindex: '-1',\n        role: 'document'\n      }\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i1.NzConfigService\n    }, {\n      type: NzImagePreviewOptions\n    }, {\n      type: i3.OverlayRef\n    }];\n  }, {\n    imageRef: [{\n      type: ViewChild,\n      args: ['imgRef']\n    }]\n  });\n})();\n\nclass NzImageService {\n  constructor(overlay, injector, nzConfigService, directionality) {\n    this.overlay = overlay;\n    this.injector = injector;\n    this.nzConfigService = nzConfigService;\n    this.directionality = directionality;\n  }\n\n  preview(images, options) {\n    return this.display(images, options);\n  }\n\n  display(images, config) {\n    const configMerged = Object.assign(Object.assign({}, new NzImagePreviewOptions()), config !== null && config !== void 0 ? config : {});\n    const overlayRef = this.createOverlay(configMerged);\n    const previewComponent = this.attachPreviewComponent(overlayRef, configMerged);\n    previewComponent.setImages(images);\n    const previewRef = new NzImagePreviewRef(previewComponent, configMerged, overlayRef);\n    previewComponent.previewRef = previewRef;\n    return previewRef;\n  }\n\n  attachPreviewComponent(overlayRef, config) {\n    const injector = Injector.create({\n      parent: this.injector,\n      providers: [{\n        provide: OverlayRef,\n        useValue: overlayRef\n      }, {\n        provide: NzImagePreviewOptions,\n        useValue: config\n      }]\n    });\n    const containerPortal = new ComponentPortal(NzImagePreviewComponent, null, injector);\n    const containerRef = overlayRef.attach(containerPortal);\n    return containerRef.instance;\n  }\n\n  createOverlay(config) {\n    var _a, _b;\n\n    const globalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME$1) || {};\n    const overLayConfig = new OverlayConfig({\n      hasBackdrop: true,\n      scrollStrategy: this.overlay.scrollStrategies.block(),\n      positionStrategy: this.overlay.position().global(),\n      disposeOnNavigation: (_b = (_a = config.nzCloseOnNavigation) !== null && _a !== void 0 ? _a : globalConfig.nzCloseOnNavigation) !== null && _b !== void 0 ? _b : true,\n      backdropClass: IMAGE_PREVIEW_MASK_CLASS_NAME,\n      direction: config.nzDirection || globalConfig.nzDirection || this.directionality.value\n    });\n    return this.overlay.create(overLayConfig);\n  }\n\n}\n\nNzImageService.ɵfac = function NzImageService_Factory(t) {\n  return new (t || NzImageService)(i0.ɵɵinject(i3.Overlay), i0.ɵɵinject(i0.Injector), i0.ɵɵinject(i1.NzConfigService), i0.ɵɵinject(i3$1.Directionality, 8));\n};\n\nNzImageService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NzImageService,\n  factory: NzImageService.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NzImageService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i3.Overlay\n    }, {\n      type: i0.Injector\n    }, {\n      type: i1.NzConfigService\n    }, {\n      type: i3$1.Directionality,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nclass NzImageGroupComponent {\n  constructor() {\n    this.images = [];\n  }\n\n  addImage(image) {\n    this.images.push(image);\n  }\n\n}\n\nNzImageGroupComponent.ɵfac = function NzImageGroupComponent_Factory(t) {\n  return new (t || NzImageGroupComponent)();\n};\n\nNzImageGroupComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NzImageGroupComponent,\n  selectors: [[\"nz-image-group\"]],\n  exportAs: [\"nzImageGroup\"],\n  ngContentSelectors: _c1,\n  decls: 1,\n  vars: 0,\n  template: function NzImageGroupComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵprojection(0);\n    }\n  },\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NzImageGroupComponent, [{\n    type: Component,\n    args: [{\n      selector: 'nz-image-group',\n      exportAs: 'nzImageGroup',\n      template: '<ng-content></ng-content>',\n      preserveWhitespaces: false,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      encapsulation: ViewEncapsulation.None\n    }]\n  }], null, null);\n})();\n\nconst NZ_CONFIG_MODULE_NAME = 'image';\n\nclass NzImageDirective {\n  constructor(document, nzConfigService, elementRef, nzImageService, cdr, parentGroup, directionality) {\n    this.document = document;\n    this.nzConfigService = nzConfigService;\n    this.elementRef = elementRef;\n    this.nzImageService = nzImageService;\n    this.cdr = cdr;\n    this.parentGroup = parentGroup;\n    this.directionality = directionality;\n    this._nzModuleName = NZ_CONFIG_MODULE_NAME;\n    this.nzSrc = '';\n    this.nzSrcset = '';\n    this.nzDisablePreview = false;\n    this.nzFallback = null;\n    this.nzPlaceholder = null;\n    this.status = 'normal';\n    this.backLoadDestroy$ = new Subject();\n    this.destroy$ = new Subject();\n  }\n\n  get previewable() {\n    return !this.nzDisablePreview && this.status !== 'error';\n  }\n\n  ngOnInit() {\n    var _a;\n\n    this.backLoad();\n\n    if (this.parentGroup) {\n      this.parentGroup.addImage(this);\n    }\n\n    if (this.directionality) {\n      (_a = this.directionality.change) === null || _a === void 0 ? void 0 : _a.pipe(takeUntil(this.destroy$)).subscribe(direction => {\n        this.dir = direction;\n        this.cdr.detectChanges();\n      });\n      this.dir = this.directionality.value;\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  onPreview() {\n    if (!this.previewable) {\n      return;\n    }\n\n    if (this.parentGroup) {\n      // preview inside image group\n      const previewAbleImages = this.parentGroup.images.filter(e => e.previewable);\n      const previewImages = previewAbleImages.map(e => ({\n        src: e.nzSrc,\n        srcset: e.nzSrcset\n      }));\n      const previewIndex = previewAbleImages.findIndex(el => this === el);\n      const previewRef = this.nzImageService.preview(previewImages, {\n        nzDirection: this.dir\n      });\n      previewRef.switchTo(previewIndex);\n    } else {\n      // preview not inside image group\n      const previewImages = [{\n        src: this.nzSrc,\n        srcset: this.nzSrcset\n      }];\n      this.nzImageService.preview(previewImages, {\n        nzDirection: this.dir\n      });\n    }\n  }\n\n  getElement() {\n    return this.elementRef;\n  }\n\n  ngOnChanges(changes) {\n    const {\n      nzSrc\n    } = changes;\n\n    if (nzSrc) {\n      this.getElement().nativeElement.src = nzSrc.currentValue;\n      this.backLoad();\n    }\n  }\n  /**\n   * use internal Image object handle fallback & placeholder\n   *\n   * @private\n   */\n\n\n  backLoad() {\n    this.backLoadImage = this.document.createElement('img');\n    this.backLoadImage.src = this.nzSrc;\n    this.backLoadImage.srcset = this.nzSrcset;\n    this.status = 'loading'; // unsubscribe last backLoad\n\n    this.backLoadDestroy$.next();\n    this.backLoadDestroy$.complete();\n    this.backLoadDestroy$ = new Subject();\n\n    if (this.backLoadImage.complete) {\n      this.status = 'normal';\n      this.getElement().nativeElement.src = this.nzSrc;\n      this.getElement().nativeElement.srcset = this.nzSrcset;\n    } else {\n      if (this.nzPlaceholder) {\n        this.getElement().nativeElement.src = this.nzPlaceholder;\n        this.getElement().nativeElement.srcset = '';\n      } else {\n        this.getElement().nativeElement.src = this.nzSrc;\n        this.getElement().nativeElement.srcset = this.nzSrcset;\n      } // The `nz-image` directive can be destroyed before the `load` or `error` event is dispatched,\n      // so there's no sense to keep capturing `this`.\n\n\n      fromEvent(this.backLoadImage, 'load').pipe(takeUntil(this.backLoadDestroy$), takeUntil(this.destroy$)).subscribe(() => {\n        this.status = 'normal';\n        this.getElement().nativeElement.src = this.nzSrc;\n        this.getElement().nativeElement.srcset = this.nzSrcset;\n      });\n      fromEvent(this.backLoadImage, 'error').pipe(takeUntil(this.backLoadDestroy$), takeUntil(this.destroy$)).subscribe(() => {\n        this.status = 'error';\n\n        if (this.nzFallback) {\n          this.getElement().nativeElement.src = this.nzFallback;\n          this.getElement().nativeElement.srcset = '';\n        }\n      });\n    }\n  }\n\n}\n\nNzImageDirective.ɵfac = function NzImageDirective_Factory(t) {\n  return new (t || NzImageDirective)(i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(i1.NzConfigService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(NzImageService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(NzImageGroupComponent, 8), i0.ɵɵdirectiveInject(i3$1.Directionality, 8));\n};\n\nNzImageDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NzImageDirective,\n  selectors: [[\"img\", \"nz-image\", \"\"]],\n  hostBindings: function NzImageDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function NzImageDirective_click_HostBindingHandler() {\n        return ctx.onPreview();\n      });\n    }\n  },\n  inputs: {\n    nzSrc: \"nzSrc\",\n    nzSrcset: \"nzSrcset\",\n    nzDisablePreview: \"nzDisablePreview\",\n    nzFallback: \"nzFallback\",\n    nzPlaceholder: \"nzPlaceholder\"\n  },\n  exportAs: [\"nzImage\"],\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n__decorate([InputBoolean(), WithConfig()], NzImageDirective.prototype, \"nzDisablePreview\", void 0);\n\n__decorate([WithConfig()], NzImageDirective.prototype, \"nzFallback\", void 0);\n\n__decorate([WithConfig()], NzImageDirective.prototype, \"nzPlaceholder\", void 0);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NzImageDirective, [{\n    type: Directive,\n    args: [{\n      selector: 'img[nz-image]',\n      exportAs: 'nzImage',\n      host: {\n        '(click)': 'onPreview()'\n      }\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: i1.NzConfigService\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: NzImageService\n    }, {\n      type: i0.ChangeDetectorRef\n    }, {\n      type: NzImageGroupComponent,\n      decorators: [{\n        type: Optional\n      }]\n    }, {\n      type: i3$1.Directionality,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, {\n    nzSrc: [{\n      type: Input\n    }],\n    nzSrcset: [{\n      type: Input\n    }],\n    nzDisablePreview: [{\n      type: Input\n    }],\n    nzFallback: [{\n      type: Input\n    }],\n    nzPlaceholder: [{\n      type: Input\n    }]\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nclass NzImageModule {}\n\nNzImageModule.ɵfac = function NzImageModule_Factory(t) {\n  return new (t || NzImageModule)();\n};\n\nNzImageModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NzImageModule\n});\nNzImageModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [NzImageService],\n  imports: [[BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NzImageModule, [{\n    type: NgModule,\n    args: [{\n      imports: [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule],\n      exports: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent],\n      providers: [NzImageService],\n      entryComponents: [NzImagePreviewComponent],\n      declarations: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent]\n    }]\n  }], null, null);\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { FADE_CLASS_NAME_MAP, IMAGE_PREVIEW_MASK_CLASS_NAME, NZ_CONFIG_MODULE_NAME$1 as NZ_CONFIG_MODULE_NAME, NzImageDirective, NzImageGroupComponent, NzImageModule, NzImagePreviewComponent, NzImagePreviewOptions, NzImagePreviewRef, NzImageService, getClientSize, getFitContentPosition, getOffset };","map":{"version":3,"sources":["/home/tudor/Desktop/Work/Git/Cute/node_modules/ng-zorro-antd/fesm2015/ng-zorro-antd-image.mjs"],"names":["__decorate","i4","DOCUMENT","CommonModule","i0","EventEmitter","Component","ChangeDetectionStrategy","ViewEncapsulation","ViewChild","Injector","Injectable","Optional","Directive","Inject","Input","NgModule","Subject","fromEvent","filter","take","takeUntil","i1","WithConfig","isNotNil","InputBoolean","i3","OverlayRef","OverlayConfig","OverlayModule","ComponentPortal","PortalModule","ESCAPE","hasModifierKey","fadeMotion","i5","NzIconModule","i6","DragDropModule","i3$1","BidiModule","NzPipesModule","FADE_CLASS_NAME_MAP","enter","enterActive","leave","leaveActive","IMAGE_PREVIEW_MASK_CLASS_NAME","NZ_CONFIG_MODULE_NAME$1","NzImagePreviewOptions","constructor","nzKeyboard","nzNoAnimation","nzMaskClosable","nzCloseOnNavigation","NzImagePreviewRef","previewInstance","config","overlayRef","destroy$","keydownEvents","pipe","event","keyCode","subscribe","preventDefault","close","detachments","dispose","containerClick","closeClick","animationStateChanged","phaseName","toState","switchTo","index","next","prev","startLeaveAnimation","getFitContentPosition","params","fixPos","width","clientWidth","height","clientHeight","x","y","fitPoint","left","top","getOffset","node","box","getBoundingClientRect","docElem","document","documentElement","window","pageXOffset","scrollLeft","clientLeft","body","pageYOffset","scrollTop","clientTop","getClientSize","innerHeight","start","size","clientSize","startAddSize","offsetStart","distance","initialPosition","NzImagePreviewComponent","cdr","nzConfigService","_a","_b","images","isDragging","visible","animationState","previewImageTransform","previewImageWrapperTransform","operations","icon","onClick","onClose","type","onZoomIn","onZoomOut","onRotateRight","onRotateLeft","zoomOutDisabled","position","Object","assign","zoom","nzZoom","rotate","nzRotate","updateZoomOutDisabled","updatePreviewImageTransform","updatePreviewImageWrapperTransform","animationDisabled","maskClosable","defaultConfig","getConfigForComponent","setImages","markForCheck","length","reset","emit","onSwitchLeft","stopPropagation","onSwitchRight","onContainerClick","e","target","currentTarget","onAnimationStart","setEnterAnimationClass","setLeaveAnimationClass","onAnimationDone","onDragStarted","onDragReleased","imageRef","nativeElement","offsetWidth","offsetHeight","isRotate","fitContentParams","fitContentPos","ngOnDestroy","complete","backdropElement","classList","add","ɵfac","ChangeDetectorRef","NzConfigService","ɵcmp","NgForOf","NzIconDirective","CdkDrag","NgIf","CdkDragHandle","args","selector","exportAs","animations","template","preserveWhitespaces","changeDetection","OnPush","encapsulation","None","host","class","tabindex","role","NzImageService","overlay","injector","directionality","preview","options","display","configMerged","createOverlay","previewComponent","attachPreviewComponent","previewRef","create","parent","providers","provide","useValue","containerPortal","containerRef","attach","instance","globalConfig","overLayConfig","hasBackdrop","scrollStrategy","scrollStrategies","block","positionStrategy","global","disposeOnNavigation","backdropClass","direction","nzDirection","value","Overlay","Directionality","ɵprov","decorators","NzImageGroupComponent","addImage","image","push","NZ_CONFIG_MODULE_NAME","NzImageDirective","elementRef","nzImageService","parentGroup","_nzModuleName","nzSrc","nzSrcset","nzDisablePreview","nzFallback","nzPlaceholder","status","backLoadDestroy$","previewable","ngOnInit","backLoad","change","dir","detectChanges","onPreview","previewAbleImages","previewImages","map","src","srcset","previewIndex","findIndex","el","getElement","ngOnChanges","changes","currentValue","backLoadImage","createElement","ElementRef","ɵdir","prototype","undefined","NzImageModule","ɵmod","ɵinj","imports","exports","entryComponents","declarations"],"mappings":"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","sourcesContent":["import { __decorate } from 'tslib';\nimport * as i4 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, ViewChild, Injector, Injectable, Optional, Directive, Inject, Input, NgModule } from '@angular/core';\nimport { Subject, fromEvent } from 'rxjs';\nimport { filter, take, takeUntil } from 'rxjs/operators';\nimport * as i1 from 'ng-zorro-antd/core/config';\nimport { WithConfig } from 'ng-zorro-antd/core/config';\nimport { isNotNil, InputBoolean } from 'ng-zorro-antd/core/util';\nimport * as i3 from '@angular/cdk/overlay';\nimport { OverlayRef, OverlayConfig, OverlayModule } from '@angular/cdk/overlay';\nimport { ComponentPortal, PortalModule } from '@angular/cdk/portal';\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\nimport { fadeMotion } from 'ng-zorro-antd/core/animation';\nimport * as i5 from 'ng-zorro-antd/icon';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport * as i6 from '@angular/cdk/drag-drop';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport * as i3$1 from '@angular/cdk/bidi';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nconst FADE_CLASS_NAME_MAP = {\n    enter: 'ant-fade-enter',\n    enterActive: 'ant-fade-enter-active',\n    leave: 'ant-fade-leave',\n    leaveActive: 'ant-fade-leave-active'\n};\nconst IMAGE_PREVIEW_MASK_CLASS_NAME = 'ant-image-preview-mask';\nconst NZ_CONFIG_MODULE_NAME$1 = 'image';\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzImagePreviewOptions {\n    constructor() {\n        this.nzKeyboard = true;\n        this.nzNoAnimation = false;\n        this.nzMaskClosable = true;\n        this.nzCloseOnNavigation = true;\n    }\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzImagePreviewRef {\n    constructor(previewInstance, config, overlayRef) {\n        this.previewInstance = previewInstance;\n        this.config = config;\n        this.overlayRef = overlayRef;\n        this.destroy$ = new Subject();\n        overlayRef\n            .keydownEvents()\n            .pipe(filter(event => this.config.nzKeyboard && event.keyCode === ESCAPE && !hasModifierKey(event)))\n            .subscribe(event => {\n            event.preventDefault();\n            this.close();\n        });\n        overlayRef.detachments().subscribe(() => {\n            this.overlayRef.dispose();\n        });\n        previewInstance.containerClick.pipe(take(1), takeUntil(this.destroy$)).subscribe(() => {\n            this.close();\n        });\n        previewInstance.closeClick.pipe(take(1), takeUntil(this.destroy$)).subscribe(() => {\n            this.close();\n        });\n        previewInstance.animationStateChanged\n            .pipe(filter(event => event.phaseName === 'done' && event.toState === 'leave'), take(1))\n            .subscribe(() => {\n            this.dispose();\n        });\n    }\n    switchTo(index) {\n        this.previewInstance.switchTo(index);\n    }\n    next() {\n        this.previewInstance.next();\n    }\n    prev() {\n        this.previewInstance.prev();\n    }\n    close() {\n        this.previewInstance.startLeaveAnimation();\n    }\n    dispose() {\n        this.destroy$.next();\n        this.overlayRef.dispose();\n    }\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n/**\n * fit content details: https://github.com/NG-ZORRO/ng-zorro-antd/pull/6154#issuecomment-745025554\n *\n * calc position x,y point\n *\n * CASE (width <= clientWidth && height <= clientHeight):\n *\n * ------------- clientWidth -------------\n * |                                     |\n * |        ------ width ------          |\n * |        |                 |          |\n * |        |                 |          |\n * client   height            |          |\n * Height   |                 |          |\n * |        |                 |          |\n * |        -------------------          |\n * |                                     |\n * |                                     |\n * ---------------------------------------\n * fixedPosition = { x: 0, y: 0 }\n *\n *\n *\n * CASE (width > clientWidth || height > clientHeight):\n *\n * ------------- clientWidth -------------\n * |        |                            |\n * |        top                          |\n * |        |                            |\n * |--left--|--------------- width -----------------\n * |        |                                      |\n * client   |                                      |\n * Height   |                                      |\n * |        |                                      |\n * |        |                                      |\n * |        height                                 |\n * |        |                                      |\n * ---------|                                      |\n *          |                                      |\n *          |                                      |\n *          |                                      |\n *          ----------------------------------------\n *\n *\n * - left || top > 0\n *   left -> 0 || top -> 0\n *\n * - (left + width) < clientWidth || (top + height) < clientHeight\n * - left | top + width | height < clientWidth | clientHeight -> Back left | top + width | height === clientWidth | clientHeight\n *\n * DEFAULT:\n * - hold position\n *\n */\nfunction getFitContentPosition(params) {\n    let fixPos = {};\n    if (params.width <= params.clientWidth && params.height <= params.clientHeight) {\n        fixPos = {\n            x: 0,\n            y: 0\n        };\n    }\n    if (params.width > params.clientWidth || params.height > params.clientHeight) {\n        fixPos = {\n            x: fitPoint(params.left, params.width, params.clientWidth),\n            y: fitPoint(params.top, params.height, params.clientHeight)\n        };\n    }\n    return fixPos;\n}\nfunction getOffset(node) {\n    const box = node.getBoundingClientRect();\n    const docElem = document.documentElement;\n    // use docElem.scrollLeft to support IE\n    return {\n        left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n        top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n    };\n}\nfunction getClientSize() {\n    const width = document.documentElement.clientWidth;\n    const height = window.innerHeight || document.documentElement.clientHeight;\n    return {\n        width,\n        height\n    };\n}\nfunction fitPoint(start, size, clientSize) {\n    const startAddSize = start + size;\n    const offsetStart = (size - clientSize) / 2;\n    let distance = null;\n    if (size > clientSize) {\n        if (start > 0) {\n            distance = offsetStart;\n        }\n        if (start < 0 && startAddSize < clientSize) {\n            distance = -offsetStart;\n        }\n    }\n    else {\n        if (start < 0 || startAddSize > clientSize) {\n            distance = start < 0 ? offsetStart : -offsetStart;\n        }\n    }\n    return distance;\n}\n\nconst initialPosition = {\n    x: 0,\n    y: 0\n};\nclass NzImagePreviewComponent {\n    constructor(cdr, nzConfigService, config, overlayRef) {\n        var _a, _b;\n        this.cdr = cdr;\n        this.nzConfigService = nzConfigService;\n        this.config = config;\n        this.overlayRef = overlayRef;\n        this.images = [];\n        this.index = 0;\n        this.isDragging = false;\n        this.visible = true;\n        this.animationState = 'enter';\n        this.animationStateChanged = new EventEmitter();\n        this.previewImageTransform = '';\n        this.previewImageWrapperTransform = '';\n        this.operations = [\n            {\n                icon: 'close',\n                onClick: () => {\n                    this.onClose();\n                },\n                type: 'close'\n            },\n            {\n                icon: 'zoom-in',\n                onClick: () => {\n                    this.onZoomIn();\n                },\n                type: 'zoomIn'\n            },\n            {\n                icon: 'zoom-out',\n                onClick: () => {\n                    this.onZoomOut();\n                },\n                type: 'zoomOut'\n            },\n            {\n                icon: 'rotate-right',\n                onClick: () => {\n                    this.onRotateRight();\n                },\n                type: 'rotateRight'\n            },\n            {\n                icon: 'rotate-left',\n                onClick: () => {\n                    this.onRotateLeft();\n                },\n                type: 'rotateLeft'\n            }\n        ];\n        this.zoomOutDisabled = false;\n        this.position = Object.assign({}, initialPosition);\n        this.containerClick = new EventEmitter();\n        this.closeClick = new EventEmitter();\n        this.destroy$ = new Subject();\n        this.zoom = (_a = this.config.nzZoom) !== null && _a !== void 0 ? _a : 1;\n        this.rotate = (_b = this.config.nzRotate) !== null && _b !== void 0 ? _b : 0;\n        this.updateZoomOutDisabled();\n        this.updatePreviewImageTransform();\n        this.updatePreviewImageWrapperTransform();\n    }\n    get animationDisabled() {\n        var _a;\n        return (_a = this.config.nzNoAnimation) !== null && _a !== void 0 ? _a : false;\n    }\n    get maskClosable() {\n        var _a, _b;\n        const defaultConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME$1) || {};\n        return (_b = (_a = this.config.nzMaskClosable) !== null && _a !== void 0 ? _a : defaultConfig.nzMaskClosable) !== null && _b !== void 0 ? _b : true;\n    }\n    setImages(images) {\n        this.images = images;\n        this.cdr.markForCheck();\n    }\n    switchTo(index) {\n        this.index = index;\n        this.cdr.markForCheck();\n    }\n    next() {\n        if (this.index < this.images.length - 1) {\n            this.reset();\n            this.index++;\n            this.updatePreviewImageTransform();\n            this.updatePreviewImageWrapperTransform();\n            this.updateZoomOutDisabled();\n            this.cdr.markForCheck();\n        }\n    }\n    prev() {\n        if (this.index > 0) {\n            this.reset();\n            this.index--;\n            this.updatePreviewImageTransform();\n            this.updatePreviewImageWrapperTransform();\n            this.updateZoomOutDisabled();\n            this.cdr.markForCheck();\n        }\n    }\n    markForCheck() {\n        this.cdr.markForCheck();\n    }\n    onClose() {\n        this.closeClick.emit();\n    }\n    onZoomIn() {\n        this.zoom += 1;\n        this.updatePreviewImageTransform();\n        this.updateZoomOutDisabled();\n        this.position = Object.assign({}, initialPosition);\n    }\n    onZoomOut() {\n        if (this.zoom > 1) {\n            this.zoom -= 1;\n            this.updatePreviewImageTransform();\n            this.updateZoomOutDisabled();\n            this.position = Object.assign({}, initialPosition);\n        }\n    }\n    onRotateRight() {\n        this.rotate += 90;\n        this.updatePreviewImageTransform();\n    }\n    onRotateLeft() {\n        this.rotate -= 90;\n        this.updatePreviewImageTransform();\n    }\n    onSwitchLeft(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.prev();\n    }\n    onSwitchRight(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.next();\n    }\n    onContainerClick(e) {\n        if (e.target === e.currentTarget && this.maskClosable) {\n            this.containerClick.emit();\n        }\n    }\n    onAnimationStart(event) {\n        if (event.toState === 'enter') {\n            this.setEnterAnimationClass();\n        }\n        else if (event.toState === 'leave') {\n            this.setLeaveAnimationClass();\n        }\n        this.animationStateChanged.emit(event);\n    }\n    onAnimationDone(event) {\n        if (event.toState === 'enter') {\n            this.setEnterAnimationClass();\n        }\n        else if (event.toState === 'leave') {\n            this.setLeaveAnimationClass();\n        }\n        this.animationStateChanged.emit(event);\n    }\n    startLeaveAnimation() {\n        this.animationState = 'leave';\n        this.cdr.markForCheck();\n    }\n    onDragStarted() {\n        this.isDragging = true;\n    }\n    onDragReleased() {\n        this.isDragging = false;\n        const width = this.imageRef.nativeElement.offsetWidth * this.zoom;\n        const height = this.imageRef.nativeElement.offsetHeight * this.zoom;\n        const { left, top } = getOffset(this.imageRef.nativeElement);\n        const { width: clientWidth, height: clientHeight } = getClientSize();\n        const isRotate = this.rotate % 180 !== 0;\n        const fitContentParams = {\n            width: isRotate ? height : width,\n            height: isRotate ? width : height,\n            left,\n            top,\n            clientWidth,\n            clientHeight\n        };\n        const fitContentPos = getFitContentPosition(fitContentParams);\n        if (isNotNil(fitContentPos.x) || isNotNil(fitContentPos.y)) {\n            this.position = Object.assign(Object.assign({}, this.position), fitContentPos);\n        }\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n    updatePreviewImageTransform() {\n        this.previewImageTransform = `scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`;\n    }\n    updatePreviewImageWrapperTransform() {\n        this.previewImageWrapperTransform = `translate3d(${this.position.x}px, ${this.position.y}px, 0)`;\n    }\n    updateZoomOutDisabled() {\n        this.zoomOutDisabled = this.zoom <= 1;\n    }\n    setEnterAnimationClass() {\n        if (this.animationDisabled) {\n            return;\n        }\n        const backdropElement = this.overlayRef.backdropElement;\n        if (backdropElement) {\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.enter);\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.enterActive);\n        }\n    }\n    setLeaveAnimationClass() {\n        if (this.animationDisabled) {\n            return;\n        }\n        const backdropElement = this.overlayRef.backdropElement;\n        if (backdropElement) {\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.leave);\n            backdropElement.classList.add(FADE_CLASS_NAME_MAP.leaveActive);\n        }\n    }\n    reset() {\n        this.zoom = 1;\n        this.rotate = 0;\n        this.position = Object.assign({}, initialPosition);\n    }\n}\nNzImagePreviewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImagePreviewComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.NzConfigService }, { token: NzImagePreviewOptions }, { token: i3.OverlayRef }], target: i0.ɵɵFactoryTarget.Component });\nNzImagePreviewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.2\", type: NzImagePreviewComponent, selector: \"nz-image-preview\", host: { attributes: { \"tabindex\": \"-1\", \"role\": \"document\" }, listeners: { \"@fadeMotion.start\": \"onAnimationStart($event)\", \"@fadeMotion.done\": \"onAnimationDone($event)\", \"click\": \"onContainerClick($event)\" }, properties: { \"class.ant-image-preview-moving\": \"isDragging\", \"style.zIndex\": \"config.nzZIndex\", \"@.disabled\": \"config.nzNoAnimation\", \"@fadeMotion\": \"animationState\" }, classAttribute: \"ant-image-preview-wrap\" }, viewQueries: [{ propertyName: \"imageRef\", first: true, predicate: [\"imgRef\"], descendants: true }], exportAs: [\"nzImagePreview\"], ngImport: i0, template: `\n    <div class=\"ant-image-preview\">\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n      <div class=\"ant-image-preview-content\">\n        <div class=\"ant-image-preview-body\">\n          <ul class=\"ant-image-preview-operations\">\n            <li\n              class=\"ant-image-preview-operations-operation\"\n              [class.ant-image-preview-operations-operation-disabled]=\"zoomOutDisabled && option.type === 'zoomOut'\"\n              (click)=\"option.onClick()\"\n              *ngFor=\"let option of operations\"\n            >\n              <span class=\"ant-image-preview-operations-icon\" nz-icon [nzType]=\"option.icon\" nzTheme=\"outline\"></span>\n            </li>\n          </ul>\n          <div\n            class=\"ant-image-preview-img-wrapper\"\n            cdkDrag\n            [style.transform]=\"previewImageWrapperTransform\"\n            [cdkDragFreeDragPosition]=\"position\"\n            (mousedown)=\"onDragStarted()\"\n            (cdkDragReleased)=\"onDragReleased()\"\n          >\n            <ng-container *ngFor=\"let image of images; index as imageIndex\">\n              <img\n                cdkDragHandle\n                class=\"ant-image-preview-img\"\n                #imgRef\n                *ngIf=\"index === imageIndex\"\n                [attr.src]=\"image.src\"\n                [attr.srcset]=\"image.srcset\"\n                [attr.alt]=\"image.alt\"\n                [style.width]=\"image.width\"\n                [style.height]=\"image.height\"\n                [style.transform]=\"previewImageTransform\"\n              />\n            </ng-container>\n          </div>\n          <ng-container *ngIf=\"images.length > 1\">\n            <div\n              class=\"ant-image-preview-switch-left\"\n              [class.ant-image-preview-switch-left-disabled]=\"index <= 0\"\n              (click)=\"onSwitchLeft($event)\"\n            >\n              <span nz-icon nzType=\"left\" nzTheme=\"outline\"></span>\n            </div>\n            <div\n              class=\"ant-image-preview-switch-right\"\n              [class.ant-image-preview-switch-right-disabled]=\"index >= images.length - 1\"\n              (click)=\"onSwitchRight($event)\"\n            >\n              <span nz-icon nzType=\"right\" nzTheme=\"outline\"></span>\n            </div>\n          </ng-container>\n        </div>\n      </div>\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n    </div>\n  `, isInline: true, directives: [{ type: i4.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i5.NzIconDirective, selector: \"[nz-icon]\", inputs: [\"nzSpin\", \"nzRotate\", \"nzType\", \"nzTheme\", \"nzTwotoneColor\", \"nzIconfont\"], exportAs: [\"nzIcon\"] }, { type: i6.CdkDrag, selector: \"[cdkDrag]\", inputs: [\"cdkDragData\", \"cdkDragLockAxis\", \"cdkDragRootElement\", \"cdkDragBoundary\", \"cdkDragStartDelay\", \"cdkDragFreeDragPosition\", \"cdkDragDisabled\", \"cdkDragConstrainPosition\", \"cdkDragPreviewClass\", \"cdkDragPreviewContainer\"], outputs: [\"cdkDragStarted\", \"cdkDragReleased\", \"cdkDragEnded\", \"cdkDragEntered\", \"cdkDragExited\", \"cdkDragDropped\", \"cdkDragMoved\"], exportAs: [\"cdkDrag\"] }, { type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i6.CdkDragHandle, selector: \"[cdkDragHandle]\", inputs: [\"cdkDragHandleDisabled\"] }], animations: [fadeMotion], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImagePreviewComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'nz-image-preview',\n                    exportAs: 'nzImagePreview',\n                    animations: [fadeMotion],\n                    template: `\n    <div class=\"ant-image-preview\">\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n      <div class=\"ant-image-preview-content\">\n        <div class=\"ant-image-preview-body\">\n          <ul class=\"ant-image-preview-operations\">\n            <li\n              class=\"ant-image-preview-operations-operation\"\n              [class.ant-image-preview-operations-operation-disabled]=\"zoomOutDisabled && option.type === 'zoomOut'\"\n              (click)=\"option.onClick()\"\n              *ngFor=\"let option of operations\"\n            >\n              <span class=\"ant-image-preview-operations-icon\" nz-icon [nzType]=\"option.icon\" nzTheme=\"outline\"></span>\n            </li>\n          </ul>\n          <div\n            class=\"ant-image-preview-img-wrapper\"\n            cdkDrag\n            [style.transform]=\"previewImageWrapperTransform\"\n            [cdkDragFreeDragPosition]=\"position\"\n            (mousedown)=\"onDragStarted()\"\n            (cdkDragReleased)=\"onDragReleased()\"\n          >\n            <ng-container *ngFor=\"let image of images; index as imageIndex\">\n              <img\n                cdkDragHandle\n                class=\"ant-image-preview-img\"\n                #imgRef\n                *ngIf=\"index === imageIndex\"\n                [attr.src]=\"image.src\"\n                [attr.srcset]=\"image.srcset\"\n                [attr.alt]=\"image.alt\"\n                [style.width]=\"image.width\"\n                [style.height]=\"image.height\"\n                [style.transform]=\"previewImageTransform\"\n              />\n            </ng-container>\n          </div>\n          <ng-container *ngIf=\"images.length > 1\">\n            <div\n              class=\"ant-image-preview-switch-left\"\n              [class.ant-image-preview-switch-left-disabled]=\"index <= 0\"\n              (click)=\"onSwitchLeft($event)\"\n            >\n              <span nz-icon nzType=\"left\" nzTheme=\"outline\"></span>\n            </div>\n            <div\n              class=\"ant-image-preview-switch-right\"\n              [class.ant-image-preview-switch-right-disabled]=\"index >= images.length - 1\"\n              (click)=\"onSwitchRight($event)\"\n            >\n              <span nz-icon nzType=\"right\" nzTheme=\"outline\"></span>\n            </div>\n          </ng-container>\n        </div>\n      </div>\n      <div tabindex=\"0\" aria-hidden=\"true\" style=\"width: 0; height: 0; overflow: hidden; outline: none;\"></div>\n    </div>\n  `,\n                    preserveWhitespaces: false,\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                    encapsulation: ViewEncapsulation.None,\n                    host: {\n                        class: 'ant-image-preview-wrap',\n                        '[class.ant-image-preview-moving]': 'isDragging',\n                        '[style.zIndex]': 'config.nzZIndex',\n                        '[@.disabled]': 'config.nzNoAnimation',\n                        '[@fadeMotion]': 'animationState',\n                        '(@fadeMotion.start)': 'onAnimationStart($event)',\n                        '(@fadeMotion.done)': 'onAnimationDone($event)',\n                        '(click)': 'onContainerClick($event)',\n                        tabindex: '-1',\n                        role: 'document'\n                    }\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.NzConfigService }, { type: NzImagePreviewOptions }, { type: i3.OverlayRef }]; }, propDecorators: { imageRef: [{\n                type: ViewChild,\n                args: ['imgRef']\n            }] } });\n\nclass NzImageService {\n    constructor(overlay, injector, nzConfigService, directionality) {\n        this.overlay = overlay;\n        this.injector = injector;\n        this.nzConfigService = nzConfigService;\n        this.directionality = directionality;\n    }\n    preview(images, options) {\n        return this.display(images, options);\n    }\n    display(images, config) {\n        const configMerged = Object.assign(Object.assign({}, new NzImagePreviewOptions()), (config !== null && config !== void 0 ? config : {}));\n        const overlayRef = this.createOverlay(configMerged);\n        const previewComponent = this.attachPreviewComponent(overlayRef, configMerged);\n        previewComponent.setImages(images);\n        const previewRef = new NzImagePreviewRef(previewComponent, configMerged, overlayRef);\n        previewComponent.previewRef = previewRef;\n        return previewRef;\n    }\n    attachPreviewComponent(overlayRef, config) {\n        const injector = Injector.create({\n            parent: this.injector,\n            providers: [\n                { provide: OverlayRef, useValue: overlayRef },\n                { provide: NzImagePreviewOptions, useValue: config }\n            ]\n        });\n        const containerPortal = new ComponentPortal(NzImagePreviewComponent, null, injector);\n        const containerRef = overlayRef.attach(containerPortal);\n        return containerRef.instance;\n    }\n    createOverlay(config) {\n        var _a, _b;\n        const globalConfig = this.nzConfigService.getConfigForComponent(NZ_CONFIG_MODULE_NAME$1) || {};\n        const overLayConfig = new OverlayConfig({\n            hasBackdrop: true,\n            scrollStrategy: this.overlay.scrollStrategies.block(),\n            positionStrategy: this.overlay.position().global(),\n            disposeOnNavigation: (_b = (_a = config.nzCloseOnNavigation) !== null && _a !== void 0 ? _a : globalConfig.nzCloseOnNavigation) !== null && _b !== void 0 ? _b : true,\n            backdropClass: IMAGE_PREVIEW_MASK_CLASS_NAME,\n            direction: config.nzDirection || globalConfig.nzDirection || this.directionality.value\n        });\n        return this.overlay.create(overLayConfig);\n    }\n}\nNzImageService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageService, deps: [{ token: i3.Overlay }, { token: i0.Injector }, { token: i1.NzConfigService }, { token: i3$1.Directionality, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nNzImageService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageService });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageService, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () {\n        return [{ type: i3.Overlay }, { type: i0.Injector }, { type: i1.NzConfigService }, { type: i3$1.Directionality, decorators: [{\n                        type: Optional\n                    }] }];\n    } });\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzImageGroupComponent {\n    constructor() {\n        this.images = [];\n    }\n    addImage(image) {\n        this.images.push(image);\n    }\n}\nNzImageGroupComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageGroupComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nNzImageGroupComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.1.2\", type: NzImageGroupComponent, selector: \"nz-image-group\", exportAs: [\"nzImageGroup\"], ngImport: i0, template: '<ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageGroupComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'nz-image-group',\n                    exportAs: 'nzImageGroup',\n                    template: '<ng-content></ng-content>',\n                    preserveWhitespaces: false,\n                    changeDetection: ChangeDetectionStrategy.OnPush,\n                    encapsulation: ViewEncapsulation.None\n                }]\n        }] });\n\nconst NZ_CONFIG_MODULE_NAME = 'image';\nclass NzImageDirective {\n    constructor(document, nzConfigService, elementRef, nzImageService, cdr, parentGroup, directionality) {\n        this.document = document;\n        this.nzConfigService = nzConfigService;\n        this.elementRef = elementRef;\n        this.nzImageService = nzImageService;\n        this.cdr = cdr;\n        this.parentGroup = parentGroup;\n        this.directionality = directionality;\n        this._nzModuleName = NZ_CONFIG_MODULE_NAME;\n        this.nzSrc = '';\n        this.nzSrcset = '';\n        this.nzDisablePreview = false;\n        this.nzFallback = null;\n        this.nzPlaceholder = null;\n        this.status = 'normal';\n        this.backLoadDestroy$ = new Subject();\n        this.destroy$ = new Subject();\n    }\n    get previewable() {\n        return !this.nzDisablePreview && this.status !== 'error';\n    }\n    ngOnInit() {\n        var _a;\n        this.backLoad();\n        if (this.parentGroup) {\n            this.parentGroup.addImage(this);\n        }\n        if (this.directionality) {\n            (_a = this.directionality.change) === null || _a === void 0 ? void 0 : _a.pipe(takeUntil(this.destroy$)).subscribe((direction) => {\n                this.dir = direction;\n                this.cdr.detectChanges();\n            });\n            this.dir = this.directionality.value;\n        }\n    }\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n    onPreview() {\n        if (!this.previewable) {\n            return;\n        }\n        if (this.parentGroup) {\n            // preview inside image group\n            const previewAbleImages = this.parentGroup.images.filter(e => e.previewable);\n            const previewImages = previewAbleImages.map(e => ({ src: e.nzSrc, srcset: e.nzSrcset }));\n            const previewIndex = previewAbleImages.findIndex(el => this === el);\n            const previewRef = this.nzImageService.preview(previewImages, { nzDirection: this.dir });\n            previewRef.switchTo(previewIndex);\n        }\n        else {\n            // preview not inside image group\n            const previewImages = [{ src: this.nzSrc, srcset: this.nzSrcset }];\n            this.nzImageService.preview(previewImages, { nzDirection: this.dir });\n        }\n    }\n    getElement() {\n        return this.elementRef;\n    }\n    ngOnChanges(changes) {\n        const { nzSrc } = changes;\n        if (nzSrc) {\n            this.getElement().nativeElement.src = nzSrc.currentValue;\n            this.backLoad();\n        }\n    }\n    /**\n     * use internal Image object handle fallback & placeholder\n     *\n     * @private\n     */\n    backLoad() {\n        this.backLoadImage = this.document.createElement('img');\n        this.backLoadImage.src = this.nzSrc;\n        this.backLoadImage.srcset = this.nzSrcset;\n        this.status = 'loading';\n        // unsubscribe last backLoad\n        this.backLoadDestroy$.next();\n        this.backLoadDestroy$.complete();\n        this.backLoadDestroy$ = new Subject();\n        if (this.backLoadImage.complete) {\n            this.status = 'normal';\n            this.getElement().nativeElement.src = this.nzSrc;\n            this.getElement().nativeElement.srcset = this.nzSrcset;\n        }\n        else {\n            if (this.nzPlaceholder) {\n                this.getElement().nativeElement.src = this.nzPlaceholder;\n                this.getElement().nativeElement.srcset = '';\n            }\n            else {\n                this.getElement().nativeElement.src = this.nzSrc;\n                this.getElement().nativeElement.srcset = this.nzSrcset;\n            }\n            // The `nz-image` directive can be destroyed before the `load` or `error` event is dispatched,\n            // so there's no sense to keep capturing `this`.\n            fromEvent(this.backLoadImage, 'load')\n                .pipe(takeUntil(this.backLoadDestroy$), takeUntil(this.destroy$))\n                .subscribe(() => {\n                this.status = 'normal';\n                this.getElement().nativeElement.src = this.nzSrc;\n                this.getElement().nativeElement.srcset = this.nzSrcset;\n            });\n            fromEvent(this.backLoadImage, 'error')\n                .pipe(takeUntil(this.backLoadDestroy$), takeUntil(this.destroy$))\n                .subscribe(() => {\n                this.status = 'error';\n                if (this.nzFallback) {\n                    this.getElement().nativeElement.src = this.nzFallback;\n                    this.getElement().nativeElement.srcset = '';\n                }\n            });\n        }\n    }\n}\nNzImageDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageDirective, deps: [{ token: DOCUMENT }, { token: i1.NzConfigService }, { token: i0.ElementRef }, { token: NzImageService }, { token: i0.ChangeDetectorRef }, { token: NzImageGroupComponent, optional: true }, { token: i3$1.Directionality, optional: true }], target: i0.ɵɵFactoryTarget.Directive });\nNzImageDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.1.2\", type: NzImageDirective, selector: \"img[nz-image]\", inputs: { nzSrc: \"nzSrc\", nzSrcset: \"nzSrcset\", nzDisablePreview: \"nzDisablePreview\", nzFallback: \"nzFallback\", nzPlaceholder: \"nzPlaceholder\" }, host: { listeners: { \"click\": \"onPreview()\" } }, exportAs: [\"nzImage\"], usesOnChanges: true, ngImport: i0 });\n__decorate([\n    InputBoolean(),\n    WithConfig()\n], NzImageDirective.prototype, \"nzDisablePreview\", void 0);\n__decorate([\n    WithConfig()\n], NzImageDirective.prototype, \"nzFallback\", void 0);\n__decorate([\n    WithConfig()\n], NzImageDirective.prototype, \"nzPlaceholder\", void 0);\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'img[nz-image]',\n                    exportAs: 'nzImage',\n                    host: {\n                        '(click)': 'onPreview()'\n                    }\n                }]\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DOCUMENT]\n                    }] }, { type: i1.NzConfigService }, { type: i0.ElementRef }, { type: NzImageService }, { type: i0.ChangeDetectorRef }, { type: NzImageGroupComponent, decorators: [{\n                        type: Optional\n                    }] }, { type: i3$1.Directionality, decorators: [{\n                        type: Optional\n                    }] }];\n    }, propDecorators: { nzSrc: [{\n                type: Input\n            }], nzSrcset: [{\n                type: Input\n            }], nzDisablePreview: [{\n                type: Input\n            }], nzFallback: [{\n                type: Input\n            }], nzPlaceholder: [{\n                type: Input\n            }] } });\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nclass NzImageModule {\n}\nNzImageModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nNzImageModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageModule, declarations: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent], imports: [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule], exports: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent] });\nNzImageModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageModule, providers: [NzImageService], imports: [[BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.1.2\", ngImport: i0, type: NzImageModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [BidiModule, OverlayModule, PortalModule, DragDropModule, CommonModule, NzIconModule, NzPipesModule],\n                    exports: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent],\n                    providers: [NzImageService],\n                    entryComponents: [NzImagePreviewComponent],\n                    declarations: [NzImageDirective, NzImagePreviewComponent, NzImageGroupComponent]\n                }]\n        }] });\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { FADE_CLASS_NAME_MAP, IMAGE_PREVIEW_MASK_CLASS_NAME, NZ_CONFIG_MODULE_NAME$1 as NZ_CONFIG_MODULE_NAME, NzImageDirective, NzImageGroupComponent, NzImageModule, NzImagePreviewComponent, NzImagePreviewOptions, NzImagePreviewRef, NzImageService, getClientSize, getFitContentPosition, getOffset };\n"]},"metadata":{},"sourceType":"module"}